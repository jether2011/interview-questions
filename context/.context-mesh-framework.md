# Context Mesh Framework Reference

## Overview

Context Mesh is a framework for AI-assisted development that ensures proper context management, decision tracking, and knowledge preservation. It follows three core phases:

1. **Intent** → Define what and why before how
2. **Build** → Implement with proper context
3. **Learn** → Capture outcomes and insights

## File Type Separation Rules

### Feature Files (`intent/feature-*.md`)
- **Purpose**: Document WHAT and WHY (business/user value)
- **Contains**: 
  - Functional description (what the feature does)
  - Business value (why it exists)
  - Acceptance criteria (functional requirements)
- **Does NOT contain**:
  - Technical implementation details
  - Library/framework choices
  - Code examples
  - File paths or code structure

### Decision Files (`decisions/*.md`)
- **Purpose**: Document technical choices (HOW)
- **Contains**:
  - Technical decisions and choices
  - Rationale for decisions
  - Alternatives considered
  - Trade-offs
- **Examples**: Which library to use, which architectural approach, which API design

### Pattern Files (`knowledge/patterns/*.md`)
- **Purpose**: Document implementation patterns (HOW TO IMPLEMENT)
- **Contains**:
  - Code examples
  - Implementation patterns
  - Usage guidelines
  - Files using the pattern

### Agent Files (`agents/*.md`)
- **Purpose**: Define AI agent behaviors and capabilities
- **Contains**:
  - Agent responsibilities
  - Execution rules
  - Integration points

## Plan, Approve, Execute Pattern (MANDATORY)

For any non-trivial changes:

1. **Plan**: AI proposes changes with context
2. **Approve**: Human reviews and approves
3. **Execute**: AI implements approved changes
4. **Learn**: Document outcomes

## Context Structure

```
context/
├── .context-mesh-framework.md  # This file - framework rules
├── intent/
│   ├── project-intent.md       # Project-level intent
│   └── feature-*.md            # Feature-specific intent
├── decisions/
│   └── ###-*.md                # Technical decisions (numbered)
├── knowledge/
│   ├── patterns/               # Reusable implementation patterns
│   └── anti-patterns/          # What to avoid
├── agents/
│   └── *.md                    # AI agent definitions
└── evolution/
    ├── changelog.md            # Change history
    └── learning-*.md           # Insights and learnings
```

## When to Create Files

### Create a Feature File When:
- Adding new user-facing functionality
- Documenting existing features
- Planning new capabilities

### Create a Decision File When:
- Choosing between technical alternatives
- Making architectural decisions
- Selecting libraries or frameworks
- Defining technical approaches

### Create a Pattern File When:
- Identifying reusable code structures
- Documenting implementation conventions
- Finding recurring solutions

### Do NOT Create Files When:
- Making trivial changes
- Fixing obvious bugs
- Updating dependencies (unless significant)

## Definition of Done

Before completing any implementation:
- [ ] Intent documented (feature file exists)
- [ ] Technical decisions documented (decision files exist)
- [ ] Code follows documented patterns
- [ ] Context updated to reflect changes
- [ ] Changelog updated

## Bidirectional Links Rules

All related files must be linked bidirectionally:

1. **Feature → Decision**: Feature files must link to their technical decision files
2. **Decision → Feature**: Decision files must link back to related features
3. **Pattern → Decision**: Pattern files should reference the decisions that led to them
4. **Feature → Pattern**: Feature files can reference implementation patterns

### Link Format
```markdown
## Related
- [Type: Name](relative/path/to/file.md)
```

## Status Section Requirements

Every file must have a Status section at the bottom:

```markdown
## Status
- **Created**: [DATE] (Phase: Intent|Build|Learn)
- **Status**: Active|Completed|Deprecated|Superseded
- **Note**: [Optional context]
```

## AI Agent Guidelines

### Before Starting Work
1. Load `context/intent/project-intent.md`
2. Load relevant feature files
3. Load related decision files
4. Review applicable patterns

### During Implementation
1. Follow documented decisions
2. Use established patterns
3. Avoid documented anti-patterns

### After Changes
1. Update relevant feature files
2. Add outcomes to decision files
3. Update changelog
4. Create learning files for significant insights

---

*This framework ensures consistent, well-documented, and maintainable AI-assisted development.*
